<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Al-Khaled-Music | موسيقى مجانية</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Title (مهم جدًا) -->
<title>Al-Khaled-Music | موقع اغاني عربي وتشغيل اونلاين بدون تحميل</title>

<!-- Description -->
<meta name="description" content="Al-Khaled-Music موقع اغاني عربي حديث لتشغيل الاغاني اونلاين بجودة عالية وبدون تحميل، استمع لأفضل الاغاني العربية بدون اعلانات وفي أي وقت.">

<!-- Keywords (مش أساسي زي زمان بس نحطه عادي) -->
<meta name="keywords" content="
Al-Khaled-Music,
Al Khaled Music,
AlKhaled Music,
موقع Al-Khaled-Music,
Al-Khaled-Music اغاني,
Al-Khaled-Music songs,
اغاني عربية Al-Khaled-Music,
تشغيل اغاني اونلاين Al-Khaled-Music,
سماع اغاني بدون تحميل Al-Khaled-Music,
موقع اغاني بدون اعلانات Al-Khaled-Music,
اغاني هادئة Al-Khaled-Music,
اغاني رومانسية Al-Khaled-Music,
اغاني راب عربي Al-Khaled-Music,
اغاني مهرجانات Al-Khaled-Music,
اغاني قديمة Al-Khaled-Music,
اغاني جديدة 2025 Al-Khaled-Music,
موقع لتشغيل الاغاني بدون تحميل,
سماع اغاني عربي اونلاين بدون اعلانات,
افضل موقع اغاني عربي مجاني,
تشغيل اغاني اثناء العمل بدون حظر,
موقع اغاني شغال في الشغل,
Arabic music online,
Free Arabic songs streaming,
Listen to Arabic music online
">

<!-- Author -->
<meta name="author" content="Al-Khaled-Music">

<!-- Viewport (مهم للموبايل) -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Language -->
<meta http-equiv="Content-Language" content="ar">

<!-- Robots -->
<meta name="robots" content="index, follow">

<!-- Open Graph (لما الموقع يتشارك على فيسبوك وواتساب) -->
<meta property="og:title" content="Al-Khaled-Music | موقع اغاني عربي">
<meta property="og:description" content="استمع إلى أفضل الاغاني العربية اونلاين بدون تحميل وبجودة عالية.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://USERNAME.github.io">
<meta property="og:image" content="https://USERNAME.github.io/cover.jpg">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Al-Khaled-Music">
<meta name="twitter:description" content="موقع اغاني عربي لتشغيل الاغاني اونلاين بدون تحميل">
<meta name="twitter:image" content="https://USERNAME.github.io/cover.jpg">

    <img src="COVER.jpg" alt="Al-Khaled-Music موقع اغاني عربي">
    <style>
        :root {
            --primary: #1DB954;
            --dark-bg: #121212;
            --light-bg: #181818;
            --text: #FFFFFF;
            --text-light: #B3B3B3;
            --card-bg: #282828;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--dark-bg);
            color: var(--text);
            padding-bottom: 120px;
        }
        
        /* Header */
        .header {
            background-color: var(--light-bg);
            padding: 15px 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
        }
        
        .logo i {
            font-size: 1.8rem;
        }
        
        .nav {
            display: flex;
            gap: 20px;
        }
        
        .nav-btn {
            background: none;
            border: none;
            color: var(--text);
            font-size: 1.2rem;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 20px;
            transition: all 0.3s;
        }
        
        .nav-btn.active,
        .nav-btn:hover {
            background-color: var(--primary);
            color: white;
        }
        
        /* Main Content */
        .main-content {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* Playlists Section */
        .section-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .playlists-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .playlist-card {
            background-color: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .playlist-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }
        
        .playlist-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
        }
        
        .playlist-info {
            padding: 15px;
        }
        
        .playlist-name {
            font-size: 1.1rem;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .playlist-count {
            font-size: 0.9rem;
            color: var(--text-light);
        }
        
        /* Songs Section */
        .songs-list {
            background-color: var(--light-bg);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .song-item {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .song-item:hover {
            background-color: rgba(255,255,255,0.05);
        }
        
        .song-item.active {
            background-color: rgba(29, 185, 84, 0.1);
            border-left: 3px solid var(--primary);
        }
        
        .song-number {
            width: 40px;
            text-align: center;
            color: var(--text-light);
        }
        
        .song-cover {
            width: 50px;
            height: 50px;
            border-radius: 5px;
            margin-left: 15px;
            object-fit: cover;
        }
        
        .song-details {
            flex: 1;
            min-width: 0;
        }
        
        .song-title {
            font-size: 1rem;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .song-artist {
            font-size: 0.9rem;
            color: var(--text-light);
        }
        
        .song-duration {
            color: var(--text-light);
            font-size: 0.9rem;
        }
        
        .song-actions {
            display: flex;
            gap: 10px;
            margin-right: 15px;
        }
        
        .action-btn {
            background: none;
            border: none;
            color: var(--text-light);
            cursor: pointer;
            font-size: 1rem;
            transition: color 0.3s;
        }
        
        .action-btn:hover {
            color: var(--primary);
        }
        
        /* Player - UPDATED */
        .player {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: var(--light-bg);
            padding: 15px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-top: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 -5px 20px rgba(0,0,0,0.3);
            gap: 20px;
        }
        
        .player-song {
            display: flex;
            align-items: center;
            gap: 15px;
            min-width: 250px;
            flex: 1;
        }
        
        .player-cover {
            width: 50px;
            height: 50px;
            border-radius: 5px;
            object-fit: cover;
        }
        
        .player-info {
            min-width: 0;
        }
        
        .player-title {
            font-size: 1rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .player-artist {
            font-size: 0.9rem;
            color: var(--text-light);
        }
        
        .player-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            flex: 2;
            max-width: 600px;
        }
        
        .player-buttons {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .control-btn {
            background: none;
            border: none;
            color: var(--text);
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .control-btn.active {
            color: var(--primary);
        }
        
        .control-btn:hover {
            color: var(--primary);
            transform: scale(1.1);
        }
        
        .play-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }
        
        .play-btn:hover {
            background-color: #1ed760;
            transform: scale(1.05);
        }
        
        /* FIXED Progress Bar - Direction LTR */
        .progress-container {
            width: 100%;
            display: flex;
            align-items: center;
            gap: 10px;
            direction: ltr; /* Force LTR for progress */
        }
        
        .progress-bar {
            flex: 1;
            height: 4px;
            background-color: rgba(255,255,255,0.1);
            border-radius: 2px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            direction: ltr; /* Force LTR */
        }
        
        .progress {
            height: 100%;
            background-color: var(--primary);
            border-radius: 2px;
            width: 0%;
            position: relative;
            transition: width 0.1s linear;
            direction: ltr; /* Force LTR */
        }
        
        .progress-handle {
            position: absolute;
            right: -5px;
            top: 50%;
            transform: translateY(-50%);
            width: 12px;
            height: 12px;
            background-color: var(--primary);
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .progress-bar:hover .progress-handle {
            opacity: 1;
        }
        
        .player-time {
            display: flex;
            justify-content: space-between;
            width: 100%;
            font-size: 0.8rem;
            color: var(--text-light);
        }
        
        /* Preview Buttons */
        .preview-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 5px;
        }
        
        .preview-btn {
            background: rgba(255,255,255,0.1);
            border: none;
            color: var(--text);
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: all 0.3s;
        }
        
        .preview-btn:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .preview-btn.active {
            background-color: var(--primary);
            color: white;
        }
        
        .preview-indicator {
            display: inline-block;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: var(--primary);
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.2); }
            100% { opacity: 1; transform: scale(1); }
        }
        
        .preview-info {
            font-size: 0.7rem;
            color: var(--text-light);
            margin-top: 3px;
        }
        
        .player-extra {
            display: flex;
            align-items: center;
            gap: 15px;
            min-width: 250px;
            flex: 1;
            justify-content: flex-end;
        }
        
        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* FIXED Volume Slider - Direction LTR */
        .volume-slider {
            width: 80px;
            height: 4px;
            background-color: rgba(255,255,255,0.1);
            border-radius: 2px;
            position: relative;
            cursor: pointer;
            direction: ltr; /* Force LTR */
        }
        
        .volume-level {
            height: 100%;
            background-color: var(--text);
            border-radius: 2px;
            width: 70%;
            direction: ltr; /* Force LTR */
        }
        
        /* Tabs */
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Search */
        .search-box {
            margin: 20px 0;
            position: relative;
        }
        
        .search-input {
            width: 100%;
            padding: 15px 50px 15px 20px;
            background-color: var(--light-bg);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 25px;
            color: var(--text);
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .search-icon {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
        }
        
        /* Responsive */
        @media (max-width: 1024px) {
            .player {
                flex-direction: column;
                gap: 15px;
                padding: 15px;
            }
            
            .player-song, .player-controls, .player-extra {
                width: 100%;
            }
            
            .player-song, .player-extra {
                justify-content: center;
            }
            
            .preview-controls {
                flex-wrap: wrap;
                justify-content: center;
            }
        }
        
        @media (max-width: 768px) {
            .playlists-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .song-actions {
                display: none;
            }
            
            .player-buttons {
                gap: 10px;
            }
            
            .preview-btn span {
                display: none;
            }
            
            .preview-btn {
                padding: 5px 8px;
            }
        }
        
        /* Playlist Page */
        .playlist-header {
            background: linear-gradient(to bottom, var(--primary), var(--dark-bg));
            padding: 40px 20px;
            display: flex;
            align-items: center;
            gap: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .playlist-header-image {
            width: 200px;
            height: 200px;
            border-radius: 10px;
            object-fit: cover;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        
        .playlist-header-info h1 {
            font-size: 3rem;
            margin-bottom: 10px;
        }
        
        .playlist-header-info p {
            color: var(--text-light);
            font-size: 1.1rem;
        }
        
        .playlist-header-stats {
            display: flex;
            gap: 20px;
            margin-top: 15px;
            color: var(--text-light);
        }
        
        /* Add Song Form */
        .add-song-form {
            background-color: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
        }
        
        .form-title {
            margin-bottom: 20px;
            color: var(--primary);
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-input {
            width: 100%;
            padding: 12px;
            background-color: var(--card-bg);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 5px;
            color: var(--text);
        }
        
        .form-row {
            display: flex;
            gap: 15px;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        .submit-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
        }
        
        .submit-btn:hover {
            background-color: #1ed760;
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--light-bg);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #1ed760;
        }
        
        /* Toast */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: var(--primary);
            color: white;
            padding: 15px 25px;
            border-radius: 5px;
            z-index: 1000;
            animation: slideIn 0.3s, slideOut 0.3s 2.7s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }
        
        /* Random Play Button in Header */
        .random-play-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            font-weight: bold;
        }
        
        .random-play-btn:hover {
            background-color: #1ed760;
            transform: scale(1.05);
        }
        
        .random-play-btn.pulse {
            animation: pulse-animation 2s infinite;
        }
        
        @keyframes pulse-animation {
            0% { box-shadow: 0 0 0 0 rgba(29, 185, 84, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(29, 185, 84, 0); }
            100% { box-shadow: 0 0 0 0 rgba(29, 185, 84, 0); }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="logo">
            <i class="fas fa-music"></i>
            <span>Al-Khaled-Music</span>
        </div>
        
        <div class="nav">
            <button class="nav-btn active" data-tab="playlists">
                <i class="fas fa-list"></i>
                <span>القوائم</span>
            </button>
            <button class="nav-btn" data-tab="songs">
                <i class="fas fa-music"></i>
                <span>الأغاني</span>
            </button>
            <button class="nav-btn" data-tab="add">
                <i class="fas fa-plus"></i>
                <span>إضافة أغنية</span>
            </button>
            <button class="random-play-btn" id="random-play-header">
                <i class="fas fa-random"></i>
                <span>عشوائي</span>
            </button>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
        <!-- Search -->
        <div class="search-box">
            <input type="text" class="search-input" placeholder="ابحث عن أغنية أو فنان..." id="search-input">
            <i class="fas fa-search search-icon"></i>
        </div>
        
        <!-- Playlists Tab -->
        <div class="tab-content active" id="playlists-tab">
            <h2 class="section-title">
                <i class="fas fa-headphones"></i>
                قوائم التشغيل
            </h2>
            
            <div class="playlists-grid" id="playlists-grid">
                <!-- Playlists will be loaded here -->
            </div>
            
            <h2 class="section-title">
                <i class="fas fa-fire"></i>
                الأكثر شهرة
            </h2>
            
            <div class="songs-list" id="top-songs">
                <!-- Top songs will be loaded here -->
            </div>
        </div>
        
        <!-- All Songs Tab -->
        <div class="tab-content" id="songs-tab">
            <h2 class="section-title">
                <i class="fas fa-music"></i>
                جميع الأغاني
            </h2>
            
            <div class="songs-list" id="all-songs">
                <!-- All songs will be loaded here -->
            </div>
        </div>
        
        <!-- Add Song Tab -->
        <div class="tab-content" id="add-tab">
            <h2 class="section-title">
                <i class="fas fa-plus-circle"></i>
                إضافة أغنية جديدة
            </h2>
            
            <div class="add-song-form">
                <form id="song-form">
                    <div class="form-row">
                        <div class="form-group">
                            <input type="text" class="form-input" placeholder="اسم الأغنية" id="song-title" required>
                        </div>
                        <div class="form-group">
                            <input type="text" class="form-input" placeholder="اسم الفنان" id="song-artist" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <input type="url" class="form-input" placeholder="رابط الصورة" id="song-cover">
                        </div>
                        <div class="form-group">
                            <input type="text" class="form-input" placeholder="النوع (مثل: عربي، بوب، إلخ)" id="song-genre">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <input type="url" class="form-input" placeholder="رابط الأغنية (MP3)" id="song-url" required>
                    </div>
                    
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-plus"></i>
                        إضافة الأغنية
                    </button>
                </form>
            </div>
        </div>
        
        <!-- Playlist Detail Page (hidden by default) -->
        <div class="tab-content" id="playlist-detail">
            <div class="playlist-header" id="playlist-header">
                <!-- Playlist header will be loaded here -->
            </div>
            
            <div class="songs-list" id="playlist-songs">
                <!-- Playlist songs will be loaded here -->
            </div>
        </div>
    </div>
    
    <!-- Music Player - UPDATED -->
    <div class="player">
        <div class="player-song">
            <img src="https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" 
                 alt="Song Cover" class="player-cover" id="player-cover">
            <div class="player-info">
                <div class="player-title" id="player-title">لا توجد أغنية قيد التشغيل</div>
                <div class="player-artist" id="player-artist">اختر أغنية للبدء</div>
            </div>
        </div>
        
        <div class="player-controls">
            <div class="player-buttons">
                <button class="control-btn" id="shuffle-btn" title="تشغيل عشوائي">
                    <i class="fas fa-random"></i>
                </button>
                <button class="control-btn" id="prev-btn" title="السابق">
                    <i class="fas fa-step-backward"></i>
                </button>
                <button class="control-btn play-btn" id="play-btn" title="تشغيل/إيقاف">
                    <i class="fas fa-play" id="play-icon"></i>
                </button>
                <button class="control-btn" id="next-btn" title="التالي">
                    <i class="fas fa-step-forward"></i>
                </button>
                <button class="control-btn" id="repeat-btn" title="تكرار">
                    <i class="fas fa-redo"></i>
                </button>
            </div>
            
            <div class="progress-container">
                <span id="current-time" class="time">0:00</span>
                <div class="progress-bar" id="progress-bar">
                    <div class="progress" id="progress"></div>
                    <div class="progress-handle" id="progress-handle"></div>
                </div>
                <span id="duration" class="time">0:00</span>
            </div>
            
            <!-- Preview Controls -->
            <div class="preview-controls">
                <button class="preview-btn" id="preview-back-btn" title="رجوع 5 ثواني">
                    <i class="fas fa-backward"></i>
                    <span>5s رجوع</span>
                </button>
                <button class="preview-btn" id="preview-forward-btn" title="تقدم 5 ثواني">
                    <i class="fas fa-forward"></i>
                    <span>5s تقدم</span>
                </button>
                <button class="preview-btn" id="auto-preview-btn" title="تقديم تلقائي">
                    <span class="preview-indicator" id="preview-indicator"></span>
                    <span>تلقائي</span>
                </button>
                <div class="preview-info" id="preview-info">
                    تقديم: ±5 ثواني
                </div>
            </div>
        </div>
        
        <div class="player-extra">
            <button class="control-btn" id="like-btn" title="إضافة للمفضلة">
                <i class="far fa-heart"></i>
            </button>
            
            <div class="volume-control">
                <button class="control-btn" id="volume-btn" title="الصوت">
                    <i class="fas fa-volume-up"></i>
                </button>
                <div class="volume-slider" id="volume-slider">
                    <div class="volume-level" id="volume-level"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // بيانات الموقع
        const appData = {
            playlists: [
                {
                    id: 1,
                    name: "أفضل الأغاني العربية",
                    image: "https://images.unsplash.com/photo-1511379938547-c1f69419868d?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    songs: [1, 2, 3, 4, 5],
                    description: "أجمل الأغاني العربية الرائجة"
                },
                {
                    id: 2,
                    name: "ريمكسات 2024",
                    image: "https://images.unsplash.com/photo-1518609878373-06d740f60d8b?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    songs: [6, 7, 8],
                    description: "أحدث الريمكسات العالمية"
                },
                {
                    id: 3,
                    name: "مهرجانات شعبية",
                    image: "https://images.unsplash.com/photo-1470225620780-dba8ba36b745?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    songs: [9, 10, 11, 12],
                    description: "أجمل المهرجانات العربية"
                },
                {
                    id: 4,
                    name: "موسيقى هادئة",
                    image: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    songs: [13, 14, 15],
                    description: "موسيقى للاسترخاء والتركيز"
                },
                {
                    id: 5,
                    name: "أغاني حب",
                    image: "https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    songs: [16, 17, 18],
                    description: "أجمل أغاني الحب والرومانسية"
                },
                {
                    id: 6,
                    name: "موسيقى صيفية",
                    image: "https://images.unsplash.com/photo-1516280440614-37939bbacd81?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    songs: [19, 20, 21],
                    description: "موسيقى منعشة لأجواء الصيف"
                }
            ],
            songs: [
                {
                    id: 1,
                    title: "عمرو دياب ريمكس رومانسي",
                    artist: "عمرو دياب",
                    cover: "https://images.unsplash.com/photo-1511379938547-c1f69419868d?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: "32:30",
                    url: "MegaMix 3mr Diab 2025 by Dj Rahal اقوى ميجا ميكس لاغاني عمرو دياب ريمكس رومانسي AmrDiab.mp3",
                    playlistId: 1
                },
                {
                    id: 2,
                    title: "اسند ضهرك واقعد",
                    artist: "صاصا و عنبه",
                    cover: "https://images.unsplash.com/photo-1518609878373-06d740f60d8b?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: "2:43",
                    url: "3enba - essam sasa -  (Official Music Video) عنبه و عصام صاصا - اسند ضهرك واقعد(M4A_128K).m4a",
                    playlistId: 2
                },
                {
                    id: 3,
                    title: "مهرجان بشويشة",
                    artist: "كريم كرستيانو",
                    cover: "https://images.unsplash.com/photo-1470225620780-dba8ba36b745?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: "4:20",
                    url: "( بشويشه ) اوريدي اجهز علشان هبتدي(M4A_128K).m4a",
                    playlistId: 3
                },
                {
                    id: 4,
                    title: "خط احمر",
                    artist: " رضا البحراوي",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: "4:12",
                    url: "_رضا البحراوي _ اغنية خط احمر 2025(M4A_128K).m4a",
                    playlistId: 1
                },
                {
                    id: 5,
                    title: "ع الرايق",
                    artist: "عنبه",
                    cover: "https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: "2:21",
                    url: "3enba - 3l raye2 (Official Music Video) _ عنبه - ع الرايق(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 6,
                    title: "حد جاي منو",
                    artist: "كمال عجوه",
                    cover: "https://images.unsplash.com/photo-1516280440614-37939bbacd81?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: "3:08",
                    url: "صحي الاخصام _ حد جاي منو _ كمال عجوه - عمار الفنار [Official Music Video 4k] حصريأ 2025(M4A_128K).m4a",
                    playlistId: 6
                },
                {
                    id: 7,
                    title: "ضحكتوني بجد",
                    artist: "كمال عجوه",
                    cover: "https://images.unsplash.com/photo-1511379938547-c1f69419868d?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: "2:54",
                    url: "ضحكتوني بجد_ كلها بتدق _ كمال عجوه( الكليب الرسمي ) [Official Music Video 4k] توزيع عسكر -حصريأ 202(M4A_1.m4a",
                    playlistId: 2
                },
                {
                    id: 8,
                    title: "طب بص ده",
                    artist: "كمال عجوه",
                    cover: "https://images.unsplash.com/photo-1470225620780-dba8ba36b745?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: "2:50",
                    url: "طب بص ده ( طب بص دي ) كمال عجوه - توزيع مايو - حصريأ 2025(M4A_128K).m4a",
                    playlistId: 3
                },
                {
                    id: 9,
                    title: "طيارة تاخودني ف حتة بعيدة",
                    artist: "عمر ID",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: "6:41",
                    url: "طيارة تاخودني ف حتة بعيدة _ شادي و بلال راب و عمر ID و الصورص _ توزيع يوسف الچو(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 10,
                    title: "اغيب اغيب",
                    artist: "كمال عجوه",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: "3:10",
                    url: "اغيب اغيب _ ابطال مين ده كله فاكس _ اسلام كريزي - كمال عجوه - توزيع اسلام كريزي 2025(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 11,
                    title: " مركب الصحاب",
                    artist: "مجدى شطة",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: "6:11",
                    url: "اغنية مركب الصحاب _ غناء مجدى شطة 2017(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 12,
                    title: "روقان",
                    artist: " حوده بندق",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: "2:37",
                    url: "اغنيه ( روقان ) حوده بندق - من مسلسل رحيل بطوله ياسمين صبري و احمد صلاح حسني الحلقه 8(M4A_128K.m4a",
                    playlistId: 4
                },
                {
                    id: 13,
                    title: "الحلوة لو عاوزاك هاتيجي",
                    artist: "ميشيل مساك",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: "4:07",
                    url: "الحلوة ( الحلوة لو عاوزاك هاتيجي ) - ميشيل مساك _(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 14,
                    title: " كبده",
                    artist: "AFROTO",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: "2:58",
                    url: "AFROTO - KEBDA FT ONUY _ عفروتو  -  كبده (OFFICIAL MUSIC VIDEO) PROD BY WEZZA MONTASER(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 15,
                    title: "الكداب فى استورى واتساب",
                    artist: "كريم كرستيانو",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: "4:19",
                    url: "الكداب فى استورى واتساب ( ايه ياحكومة مفيش غيرى ) كريم كرستيانو - توزيع يوسف اوشا Offici(M4A_1.m4a",
                    playlistId: 4
                },
                {
                    id: 16,
                    title: "فى حته تانية",
                    artist: " عبد الباسط حمودة ",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: "3:09",
                    url: "Abd ElBaset Hamouda  Fi 7eta Tanya _ 2022  عبد الباسط حمودة - فى حته تانية من فيلم ( من اجل زيكو )(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 17,
                    title: "مهرجان مولد سيدى العريان على دارمز",
                    artist: "درامز الحاوي",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: "2:44",
                    url: "مهرجان مولد سيدى العريان على دارمز(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 18,
                    title: "استني يابا",
                    artist: "عنبه",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "3enba - Estana Yaba (Official AUDIO ) _ عنبه - استني يابا(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 19,
                    title: "حد نفسو فيا",
                    artist: "اسلام شيندي",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: "2:50",
                    url: "الغول ( حد نفسو فيا ) اسلام شيندي - توزيع توينز  - EL Ghol - Eslam Shendy - 2025(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 20,
                    title: "الف مرحب بالعداوة",
                    artist: "مجدي الزهار",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: "2:49",
                    url: "الف مرحب بالعداوة ( يلا قولو كلام عليا بس زودو شويه ) مجدي الزهار - موحه برودكشن(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 21,
                    title: "اللي بتحلم تلاغيها",
                    artist: "عمر - فارس سكرID ",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "اللي بتحلم تلاغيها (feat. Fares Sokar) (متخليش الس(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 22,
                    title: " قلبي عندك امسك نفسك",
                    artist: "احمد موزه",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "اللي كان بيقول علمني ( قلبي عندك امسك نفسك ) احمد موزه السلطان - توزيع فلسطيني Official Vid(M4A_1.m4a",
                    playlistId: 4
                },
                {
                    id: 23,
                    title: "المولد الي هيخرب مصر مولد",
                    artist: "2019 توزيع عفروتو المخترع",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "المولد الي هيخرب مصر مولد الذكر الجديد 2019 توزيع عفروتو المخترع(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 24,
                    title: "المولد يا بابا",
                    artist: "كمال عجوه",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "المولد يا بابا ( حبيبي لما تيجي تلعب متلبعش معانا(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 25,
                    title: "الهيبه بتهيب مننا",
                    artist: "مصطفى الجن و هادى الصغير",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "الهيبه بتهيب مننا ( 100 مرحب بالمرازية ) مصطفى الجن و هادى الصغير و ايهاب البوب - توزيع(M4A_1.m4a",
                    playlistId: 4
                },
                {
                    id: 26,
                    title: "الي انا صرفته في النايت ورميته",
                    artist: "مجدي الزهار",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "الي انا صرفته في النايت ورميته ( مطوتي لو تتفتح كلها هتتجرح ) مجدي الزهار - مهرجانات 2(M4A_1.m4a",
                    playlistId: 4
                },
                {
                    id: 27,
                    title: "انا اخ انا في الشده مابتعوضش",
                    artist: "---",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "انا اخ انا في الشده مابتعوضش(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 28,
                    title: "انا بتاع الشارع _ ولا يالي الهوا ساندك ",
                    artist: "كمال عجوه",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "انا بتاع الشارع _ ولا يالي الهوا ساندك _ كمال عجوه - محمود بدر - توزيع كارم بوبوس 2024(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 29,
                    title: "انا خدت اقوى درس منكو ( بحب نفسي نفسي ثم نفسي )",
                    artist: " عصام صاصا و كيمو الديب ",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "انا خدت اقوى درس منكو ( بحب نفسي نفسي ثم نفسي ) عصام صاصا و كيمو الديب - توزيع كيمو الد(M4A_1.m4a",
                    playlistId: 4
                },
                {
                    id: 30,
                    title: "صحي الاخصام _ حد جاي منو _",
                    artist: "كمال عجوه - عمار الفنار ",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "صحي الاخصام _ حد جاي منو _ كمال عجوه - عمار الفنار [Official Music Video 4k] حصريأ 2025(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 31,
                    title: "البت الي انت اتشدتلها",
                    artist: "اسلام كابونجا",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "البت الي انت اتشدتلها(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 32,
                    title: "انا صبري فاض ياطبيب",
                    artist: " احمد موزه ",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "انا صبري فاض ياطبيب ( الشدة لو شدت هتبين ) احمد موزه السلطان - توزيع يوسف اوشا Official Vide(M4A_1.m4a",
                    playlistId: 4
                },
                {
                    id: 33,
                    title: "أنا مش من عندكو بس واصل عندكو ( اسمي لو اتقال تاني - قاعد اتفرج فقط )",
                    artist: "اسلام كابونجا",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "أنا مش من عندكو بس واصل عندكو ( اسمي لو اتقال تاني - قاعد اتفرج فقط ) اسلام كابونجا - ح(M4A_12.m4a",
                    playlistId: 4
                },
                {
                    id: 34,
                    title: "أهلا بيكو ف ارض النفاق ( كاتب همومي موال )",
                    artist: "مجدي الزهار",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "اهلا بيكو ف ارض النفاق ( كاتب همومي موال ) مجدي الزهار - توزيع مانو الجنتل(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 35,
                    title: "اول حاجه لما تكلمني تشيل ايدك من جيبك",
                    artist: " عصام صاصا الكروان ",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "اول حاجه لما تكلمني تشيل ايدك من جيبك - عصام صاصا الكروان - توزيع كيمو الديب Official Video(M4A__1.m4a",
                    playlistId: 4
                },
                {
                    id: 36,
                    title: "بتتمنولي ألف واقعة ( الي هيريح وينمل قولو باي باي مش هيكمل )",
                    artist: "مجدي الزهار",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "بتتمنولي ألف واقعة ( الي هيريح وينمل قولو باي باي مش هيكمل ) مجدي الزهار - مهرجانات 202(M4A_1.m4a",
                    playlistId: 4
                },
                {
                    id: 37,
                    title: "بخش اقطع ( عين شمس دوله )",
                    artist: "كمال عجوه",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "بخش اقطع ( عين شمس دوله ) كمال عجوه - توزيع تانجو 2024(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 38,
                    title: "بعبع دايرتى بمشي بمطوتي ( اخرك حالة واتس يا ابنها )",
                    artist: " مصطفى الجن و هادى الصغير ",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "بعبع دايرتى بمشي بمطوتي ( اخرك حالة واتس يا ابنها ) مصطفى الجن و هادى الصغير - توزيع ا(M4A_1.m4a",
                    playlistId: 4
                },
                {
                    id: 39,
                    title: "نت هتيجى معايا ( انا شغال طلبات )",
                    artist: "مصطفى الجن و هادى الصغير",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "انت هتيجى معايا ( انا شغال طلبات ) مصطفى الجن و هادى الصغير - توزيع امجد الجوكر  Official V(M4A_1.m4a",
                    playlistId: 4
                },
                {
                    id: 40,
                    title: "انا شاب شكله بقا اكبر من سنو",
                    artist: "عصام صاصا الكروان",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "انا شاب شكله بقا اكبر من سنو(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 41,
                    title: "ول حاجه لما تكلمني تشيل ايدك من جيبك",
                    artist: "عصام صاصا الكروان",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "اول حاجه لما تكلمني تشيل ايدك من جيبك - عصام صاصا الكروان - توزيع كيمو الديب Official Video(M4A_12.m4a",
                    playlistId: 4
                },
                {
                    id: 42,
                    title: "بحر ابتريل",
                    artist: "---",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "بحر ابتريل(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 43,
                    title: "لنص التانى عم البلد (ولا ماتغركش السلسلة)",
                    artist: "---",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "النص التانى عم البلد (ولا ماتغركش السلسلة)(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 44,
                    title: "مهرجان شط الخاينين ",
                    artist: "ابو علي الكروان",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "ابو علي الكروان - مهرجان شط الخاينين _ Abo Ali Elkarawan - Shat Elkhaynen(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 45,
                    title: "مهرجان ودو المصحه",
                    artist: "مجدي شطه",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "مهرجان ودو المصحه _ غناء _ مجدي شطه _ توزيع توينز _ كلمات قاتي 2018(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 46,
                    title: "مهرجان اصحابي مبقتش بتقدر ( اصحابي ادمنت البودر )",
                    artist: "مجدي شطه و طارق الطوخي",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "مهرجان اصحابي مبقتش بتقدر ( اصحابي ادمنت البودر ) مجدي شطه و طارق الطوخي _توزيع بيبس(M4A_12.m4a",
                    playlistId: 4
                },
                {
                    id: 47,
                    title: "ياقاضي هقولك ايه",
                    artist: "مجدي شطه",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "مجدي شطه ياقاضي هقولك ايه(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 48,
                    title: "مهرجان كيس وقطر",
                    artist: "مجدي شطه",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "مهرجان كيس وقطر _ غناء مجدي شطه _ توزيع وزة منتصر _ كلمات شيكو الدنجوان 2016(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 49,
                    title: "مهرجان سجن الغرام",
                    artist: "غناء مجدي شطه",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "مهرجان سجن الغرام غناء مجدي شطه توزيع ميجا برعاية المافيا 2018(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 50,
                    title: "مهرجان انا اسمي لوحدي بطاقه",
                    artist: "مجدي شطه",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "Magdy Shata -Ana Esmy Lwahdo Beta_a - EXCLUSIVE_ مجدي شطه - مهرجان انا اسمي لوحدي بطاقه - حصريا 2021(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 51,
                    title: "مهرجان انا سيرتي بتجنن دوله(الي خارب التيك توك) ",
                    artist: "مجدي شطه",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "مهرجان انا سيرتي بتجنن دوله(الي خارب التيك توك) - مجدي شطه - محمد الفنان _ مهرجانات 2020(M4A_1.m4a",
                    playlistId: 4
                },
                {
                    id: 52,
                    title: "مهرجان  المريضه جديد 2017 شغل هيكسر الديجيهات",
                    artist: "مجدى شطه",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "مهرجان  المريضه جديد 2017 شغل هيكسر الديجيهات غناء مجدى شطه توزيع أبو عبير(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 53,
                    title: "مهرجان _باب السجن",
                    artist: "_مجدى شطة_",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "مهرجان _باب السجن_ غناء _مجدى شطة_ توزيع _مادو الفظيع_ 2018(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 54,
                    title: "مهرجان _تاجر الاثار_",
                    artist: "مجدي شطه",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "مهرجان _تاجر الاثار_ _غناء مجدي شطه _(قصه حقيقيه)2020(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 55,
                    title: "مهرجان المرشدين",
                    artist: "مجدي شطه",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "مهرجان المرشدين غناء مجدي شطه كلمات خشبه توزيع مادو الفظيع 2018(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 56,
                    title: "هرجان ورق كوتشينه",
                    artist: "_  مجدي شطه _",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "مهرجان ورق كوتشينه  2018 _  مجدي شطه _  توزيع احمد المشاكس 2018(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 57,
                    title: "أيام وليالي",
                    artist: "Tommyy",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "Tommyy - Ayam W Layaly (Short Film) _  تومي - أيام وليالي(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 58,
                    title: "Nasy",
                    artist: "Tommyy",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "Nasy (From The TV Series Ma Trah Lays Kama Ybdo)(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 59,
                    title: "مهرجان Come Back To Me ريمكس شعبي",
                    artist: "Tamer Hosny",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "مهرجان Come Back To Me ريمكس شعبي _ Red Bull Jukebox ft. Tamer Hosny(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 60,
                    title: "Melodic Techno Progressive House Mix 2024",
                    artist: "Argy Omnia Monolink Rebūke Daniel Portman Raf Fender",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "Melodic Techno Progressive House Mix 2024 Argy Omnia Monolink Rebūke Daniel Portman Raf Fender.mp3",
                    playlistId: 4
                },
                {
                    id: 61,
                    title: "امشي مع رالي",
                    artist: "تومي",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "Tommyy - Emshy Ft. _rallysszn (Official Visualizer) _ تومي - امشي مع رالي(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 62,
                    title: " ١٩ سنه من الوحده",
                    artist: "تومي",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "تومي ( عرباوي ) - ١٩ سنه من الوحده Tommyy - 19 sana on Rap Shar3 l(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 63,
                    title: "امشي مع جلالّيو",
                    artist: "تومي",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "Tommyy - Emshy Ft. Galaleo (Acoustic Version) _ تومي - امشي مع جلالّيو(M4A_128K).m4a",
                    playlistId: 4
                },
                {
                    id: 64,
                    title: "اتغيرت مع رالى",
                    artist: "تومي",
                    cover: "https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    duration: ":",
                    url: "Tommyy - Etghayart Ft. _rallysszn (Official Music Video) _ تومي - اتغيرت مع رالي(M4A_128K).m4a",
                    playlistId: 4
                }
            ],
            currentPlaylist: null,
            currentSong: null,
            isPlaying: false,
            audio: new Audio(),
            volume: 0.7,
            likedSongs: new Set(),
            currentPlaybackTime: 0,
            totalDuration: 0,
            currentQueue: [],
            currentSongIndex: -1,
            // Preview settings
            previewSeconds: 5,
            autoPreview: false,
            previewInterval: null,
            // New settings for shuffle and repeat
            isShuffle: false,
            isRepeat: false,
            shuffleHistory: []
        };

        // تهيئة التطبيق
        document.addEventListener('DOMContentLoaded', function() {
            initApp();
            loadPlaylists();
            loadTopSongs();
            loadAllSongs();
            initPlayer();
            initEventListeners();
            loadState();
        });

        function initApp() {
            // تحميل الأغاني من localStorage إذا وجدت
            const savedSongs = localStorage.getItem('userSongs');
            if (savedSongs) {
                const userSongs = JSON.parse(savedSongs);
                appData.songs = [...appData.songs, ...userSongs];
            }
            
            // تحميل قوائم التشغيل المحفوظة
            const savedPlaylists = localStorage.getItem('userPlaylists');
            if (savedPlaylists) {
                const userPlaylists = JSON.parse(savedPlaylists);
                appData.playlists = [...appData.playlists, ...userPlaylists];
            }
        }

        function loadPlaylists() {
            const playlistsGrid = document.getElementById('playlists-grid');
            
            playlistsGrid.innerHTML = appData.playlists.map(playlist => `
                <div class="playlist-card" data-id="${playlist.id}">
                    <img src="${playlist.image}" alt="${playlist.name}" class="playlist-image">
                    <div class="playlist-info">
                        <div class="playlist-name">${playlist.name}</div>
                        <div class="playlist-count">${playlist.songs.length} أغنية</div>
                    </div>
                </div>
            `).join('');
            
            // إضافة أحداث النقر على قوائم التشغيل
            document.querySelectorAll('.playlist-card').forEach(card => {
                card.addEventListener('click', function() {
                    const playlistId = parseInt(this.dataset.id);
                    showPlaylist(playlistId);
                });
            });
        }

        function loadTopSongs() {
            const topSongsList = document.getElementById('top-songs');
            
            // عرض أول 5 أغاني
            const topSongs = appData.songs.slice(0, 5);
            
            topSongsList.innerHTML = topSongs.map((song, index) => `
                <div class="song-item ${appData.currentSong && appData.currentSong.id === song.id ? 'active' : ''}" data-id="${song.id}">
                    <div class="song-number">${index + 1}</div>
                    <img src="${song.cover}" alt="${song.title}" class="song-cover">
                    <div class="song-details">
                        <div class="song-title">${song.title}</div>
                        <div class="song-artist">${song.artist}</div>
                    </div>
                    <div class="song-duration">${song.duration}</div>
                    <div class="song-actions">
                        <button class="action-btn play-song-btn" data-id="${song.id}">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="action-btn like-song-btn" data-id="${song.id}">
                            <i class="${appData.likedSongs.has(song.id) ? 'fas' : 'far'} fa-heart"></i>
                        </button>
                    </div>
                </div>
            `).join('');
            
            // إضافة أحداث الأزرار
            initSongButtons();
        }

        function loadAllSongs() {
            const allSongsList = document.getElementById('all-songs');
            
            allSongsList.innerHTML = appData.songs.map((song, index) => `
                <div class="song-item ${appData.currentSong && appData.currentSong.id === song.id ? 'active' : ''}" data-id="${song.id}">
                    <div class="song-number">${index + 1}</div>
                    <img src="${song.cover}" alt="${song.title}" class="song-cover">
                    <div class="song-details">
                        <div class="song-title">${song.title}</div>
                        <div class="song-artist">${song.artist}</div>
                    </div>
                    <div class="song-duration">${song.duration}</div>
                    <div class="song-actions">
                        <button class="action-btn play-song-btn" data-id="${song.id}">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="action-btn like-song-btn" data-id="${song.id}">
                            <i class="${appData.likedSongs.has(song.id) ? 'fas' : 'far'} fa-heart"></i>
                        </button>
                    </div>
                </div>
            `).join('');
            
            // إضافة أحداث الأزرار
            initSongButtons();
        }

        function initSongButtons() {
            // أزرار التشغيل
            document.querySelectorAll('.play-song-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const songId = parseInt(this.dataset.id);
                    const song = appData.songs.find(s => s.id === songId);
                    if (song) {
                        playSong(song);
                    }
                });
            });
            
            // أزرار الإعجاب
            document.querySelectorAll('.like-song-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const songId = parseInt(this.dataset.id);
                    toggleLike(songId);
                });
            });
            
            // النقر على الأغنية نفسها
            document.querySelectorAll('.song-item').forEach(item => {
                item.addEventListener('click', function() {
                    if (!this.querySelector('.play-song-btn').contains(event.target) && 
                        !this.querySelector('.like-song-btn').contains(event.target)) {
                        const songId = parseInt(this.dataset.id);
                        const song = appData.songs.find(s => s.id === songId);
                        if (song) {
                            playSong(song);
                        }
                    }
                });
            });
        }

        function showPlaylist(playlistId) {
            const playlist = appData.playlists.find(p => p.id === playlistId);
            if (!playlist) return;
            
            appData.currentPlaylist = playlist;
            
            // إخفاء كل التبويبات وإظهار صفحة القائمة
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById('playlist-detail').classList.add('active');
            
            // تحديث زر التبويب النشط
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // تحديث الهيدر
            const playlistHeader = document.getElementById('playlist-header');
            playlistHeader.innerHTML = `
                <img src="${playlist.image}" alt="${playlist.name}" class="playlist-header-image">
                <div class="playlist-header-info">
                    <h1>${playlist.name}</h1>
                    <p>${playlist.description}</p>
                    <div class="playlist-header-stats">
                        <span><i class="fas fa-music"></i> ${playlist.songs.length} أغنية</span>
                    </div>
                    <button class="submit-btn" id="play-all-btn" style="margin-top: 15px;">
                        <i class="fas fa-play"></i> تشغيل الكل
                    </button>
                </div>
            `;
            
            // إضافة حدث لزر تشغيل الكل
            document.getElementById('play-all-btn').addEventListener('click', function() {
                playPlaylist(playlist);
            });
            
            // عرض أغاني القائمة
            const playlistSongs = appData.songs.filter(song => playlist.songs.includes(song.id));
            const playlistSongsList = document.getElementById('playlist-songs');
            
            playlistSongsList.innerHTML = playlistSongs.map((song, index) => `
                <div class="song-item ${appData.currentSong && appData.currentSong.id === song.id ? 'active' : ''}" data-id="${song.id}">
                    <div class="song-number">${index + 1}</div>
                    <img src="${song.cover}" alt="${song.title}" class="song-cover">
                    <div class="song-details">
                        <div class="song-title">${song.title}</div>
                        <div class="song-artist">${song.artist}</div>
                    </div>
                    <div class="song-duration">${song.duration}</div>
                    <div class="song-actions">
                        <button class="action-btn play-song-btn" data-id="${song.id}">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="action-btn like-song-btn" data-id="${song.id}">
                            <i class="${appData.likedSongs.has(song.id) ? 'fas' : 'far'} fa-heart"></i>
                        </button>
                    </div>
                </div>
            `).join('');
            
            // إعادة تهيئة أزرار الأغاني
            initSongButtons();
        }

        function initPlayer() {
            appData.audio.volume = appData.volume;
            
            // تحديث وقت التشغيل
            appData.audio.addEventListener('timeupdate', function() {
                if (!appData.audio || !appData.currentSong) return;
                
                appData.currentPlaybackTime = appData.audio.currentTime;
                appData.totalDuration = appData.audio.duration || 0;
                
                document.getElementById('current-time').textContent = formatTime(appData.currentPlaybackTime);
                document.getElementById('duration').textContent = formatTime(appData.totalDuration);
                
                if (appData.totalDuration > 0) {
                    const progressPercent = (appData.currentPlaybackTime / appData.totalDuration) * 100;
                    document.getElementById('progress').style.width = `${progressPercent}%`;
                    
                    // تحديث موقع المقبض بشكل صحيح
                    const progressHandle = document.getElementById('progress-handle');
                    progressHandle.style.left = `${progressPercent}%`;
                }
            });
            
            // عند انتهاء الأغنية
            appData.audio.addEventListener('ended', function() {
                if (appData.isRepeat) {
                    // إعادة تشغيل نفس الأغنية
                    appData.audio.currentTime = 0;
                    appData.audio.play();
                } else {
                    playNext();
                }
            });
            
            // FIXED: شريط التقدم - يعمل بشكل صحيح
            const progressBar = document.getElementById('progress-bar');
            progressBar.addEventListener('click', function(e) {
                if (!appData.audio || !appData.currentSong || appData.totalDuration === 0) return;
                
                const rect = this.getBoundingClientRect();
                const clickX = e.clientX - rect.left;
                const barWidth = rect.width;
                let percent = clickX / barWidth;
                
                // التأكد من النسبة بين 0 و 1
                percent = Math.max(0, Math.min(1, percent));
                
                appData.audio.currentTime = percent * appData.totalDuration;
            });
            
            // FIXED: شريط الصوت - يعمل بشكل صحيح
            const volumeSlider = document.getElementById('volume-slider');
            volumeSlider.addEventListener('click', function(e) {
                const rect = this.getBoundingClientRect();
                const clickX = e.clientX - rect.left;
                const barWidth = rect.width;
                let percent = clickX / barWidth;
                
                percent = Math.max(0, Math.min(1, percent));
                
                appData.volume = percent;
                appData.audio.volume = appData.volume;
                updateVolumeUI();
                saveState();
            });
            
            // سحب شريط الصوت
            let isDraggingVolume = false;
            
            volumeSlider.addEventListener('mousedown', function(e) {
                isDraggingVolume = true;
                handleVolumeDrag(e);
            });
            
            document.addEventListener('mousemove', function(e) {
                if (isDraggingVolume) {
                    handleVolumeDrag(e);
                }
            });
            
            document.addEventListener('mouseup', function() {
                isDraggingVolume = false;
            });
            
            function handleVolumeDrag(e) {
                const rect = volumeSlider.getBoundingClientRect();
                const clickX = e.clientX - rect.left;
                const barWidth = rect.width;
                let percent = clickX / barWidth;
                
                percent = Math.max(0, Math.min(1, percent));
                
                appData.volume = percent;
                appData.audio.volume = appData.volume;
                updateVolumeUI();
            }
        }

        function initEventListeners() {
            // التبديل بين التبويبات
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const tab = this.dataset.tab;
                    
                    // إزالة النشط من جميع الأزرار
                    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                    // إضافة النشط للزر المحدد
                    this.classList.add('active');
                    
                    // إخفاء جميع المحتويات
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // إظهار المحتوى المحدد
                    if (tab === 'playlists') {
                        document.getElementById('playlists-tab').classList.add('active');
                    } else if (tab === 'songs') {
                        document.getElementById('songs-tab').classList.add('active');
                    } else if (tab === 'add') {
                        document.getElementById('add-tab').classList.add('active');
                    }
                });
            });
            
            // زر الرجوع (عند الضغط على زر التبويب أثناء عرض قائمة)
            document.querySelector('.nav-btn[data-tab="playlists"]').addEventListener('click', function() {
                if (document.getElementById('playlist-detail').classList.contains('active')) {
                    document.getElementById('playlist-detail').classList.remove('active');
                    document.getElementById('playlists-tab').classList.add('active');
                }
            });
            
            // تشغيل/إيقاف
            document.getElementById('play-btn').addEventListener('click', togglePlay);
            
            // الأغاني السابقة والتالية
            document.getElementById('prev-btn').addEventListener('click', playPrev);
            document.getElementById('next-btn').addEventListener('click', playNext);
            
            // زر الإعجاب
            document.getElementById('like-btn').addEventListener('click', function() {
                if (appData.currentSong) {
                    toggleLike(appData.currentSong.id);
                }
            });
            
            // زر الصوت
            document.getElementById('volume-btn').addEventListener('click', toggleMute);
            
            // أزرار التقديم
            document.getElementById('preview-back-btn').addEventListener('click', function() {
                previewSkip(-appData.previewSeconds);
            });
            
            document.getElementById('preview-forward-btn').addEventListener('click', function() {
                previewSkip(appData.previewSeconds);
            });
            
            document.getElementById('auto-preview-btn').addEventListener('click', toggleAutoPreview);
            
            // زر التشغيل العشوائي في الهيدر
            document.getElementById('random-play-header').addEventListener('click', playRandomSong);
            
            // زر التشغيل العشوائي في المشغل
            document.getElementById('shuffle-btn').addEventListener('click', toggleShuffle);
            
            // زر التكرار في المشغل
            document.getElementById('repeat-btn').addEventListener('click', toggleRepeat);
            
            // البحث
            document.getElementById('search-input').addEventListener('input', function(e) {
                const query = e.target.value.toLowerCase();
                filterSongs(query);
            });
            
            // إضافة أغنية جديدة
            document.getElementById('song-form').addEventListener('submit', function(e) {
                e.preventDefault();
                addNewSong();
            });
        }

        // تشغيل أغنية عشوائية
        function playRandomSong() {
            if (appData.songs.length === 0) {
                showToast('لا توجد أغاني للعب عشوائي');
                return;
            }
            
            // إضافة تأثير النبض على الزر
            const randomBtn = document.getElementById('random-play-header');
            randomBtn.classList.add('pulse');
            setTimeout(() => {
                randomBtn.classList.remove('pulse');
            }, 2000);
            
            // اختيار أغنية عشوائية
            const randomIndex = Math.floor(Math.random() * appData.songs.length);
            const randomSong = appData.songs[randomIndex];
            
            playSong(randomSong);
            
            showToast(`تشغيل عشوائي: ${randomSong.title}`);
        }

        // تبديل وضع التشغيل العشوائي
        function toggleShuffle() {
            appData.isShuffle = !appData.isShuffle;
            const shuffleBtn = document.getElementById('shuffle-btn');
            
            if (appData.isShuffle) {
                shuffleBtn.classList.add('active');
                showToast('تم تفعيل التشغيل العشوائي');
                
                // إذا كان هناك أغنية قيد التشغيل، إعادة ترتيب القائمة
                if (appData.currentQueue.length > 0 && appData.currentSongIndex >= 0) {
                    shuffleQueue();
                }
            } else {
                shuffleBtn.classList.remove('active');
                showToast('تم إيقاف التشغيل العشوائي');
            }
            
            saveState();
        }

        // تبديل وضع التكرار
        function toggleRepeat() {
            appData.isRepeat = !appData.isRepeat;
            const repeatBtn = document.getElementById('repeat-btn');
            
            if (appData.isRepeat) {
                repeatBtn.classList.add('active');
                showToast('تم تفعيل التكرار');
            } else {
                repeatBtn.classList.remove('active');
                showToast('تم إيقاف التكرار');
            }
            
            saveState();
        }

        // خلط قائمة التشغيل
        function shuffleQueue() {
            if (appData.currentQueue.length <= 1) return;
            
            // حفظ الأغنية الحالية
            const currentSongId = appData.currentQueue[appData.currentSongIndex];
            
            // إنشاء نسخة من القائمة بدون الأغنية الحالية
            let queueWithoutCurrent = appData.currentQueue.filter((id, index) => index !== appData.currentSongIndex);
            
            // خلط القائمة
            for (let i = queueWithoutCurrent.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [queueWithoutCurrent[i], queueWithoutCurrent[j]] = [queueWithoutCurrent[j], queueWithoutCurrent[i]];
            }
            
            // إعادة إضافة الأغنية الحالية في البداية
            appData.currentQueue = [currentSongId, ...queueWithoutCurrent];
            appData.currentSongIndex = 0;
            
            // حفظ التاريخ للتراجع
            appData.shuffleHistory = [...appData.currentQueue];
        }

        // وظيفة التقديم (تقديم/تأخير)
        function previewSkip(seconds) {
            if (!appData.audio || !appData.currentSong) return;
            
            const newTime = appData.audio.currentTime + seconds;
            
            // التأكد من أن الوقت بين 0 ومدة الأغنية
            if (newTime < 0) {
                appData.audio.currentTime = 0;
            } else if (newTime > appData.totalDuration) {
                appData.audio.currentTime = appData.totalDuration;
            } else {
                appData.audio.currentTime = newTime;
            }
            
            // تحديث شريط التقدم
            const progressPercent = (appData.audio.currentTime / appData.totalDuration) * 100;
            document.getElementById('progress').style.width = `${progressPercent}%`;
            
            // إظهار رسالة
            const direction = seconds > 0 ? 'تقدم' : 'رجوع';
            showToast(`${direction} 5 ثواني`);
        }

        // تبديل التقديم التلقائي
        function toggleAutoPreview() {
            appData.autoPreview = !appData.autoPreview;
            const btn = document.getElementById('auto-preview-btn');
            const indicator = document.getElementById('preview-indicator');
            
            if (appData.autoPreview) {
                btn.classList.add('active');
                indicator.style.display = 'inline-block';
                
                // بدء التقديم التلقائي
                startAutoPreview();
                showToast('تم تفعيل التقديم التلقائي');
            } else {
                btn.classList.remove('active');
                indicator.style.display = 'none';
                
                // إيقاف التقديم التلقائي
                stopAutoPreview();
                showToast('تم إيقاف التقديم التلقائي');
            }
            
            saveState();
        }

        // بدء التقديم التلقائي
        function startAutoPreview() {
            if (appData.previewInterval) {
                clearInterval(appData.previewInterval);
            }
            
            appData.previewInterval = setInterval(function() {
                if (appData.audio && appData.isPlaying && appData.autoPreview) {
                    // إذا اقتربنا من نهاية الأغنية (أقل من 5 ثواني)
                    if (appData.totalDuration - appData.audio.currentTime <= appData.previewSeconds) {
                        playNext();
                    } else {
                        previewSkip(appData.previewSeconds);
                    }
                }
            }, appData.previewSeconds * 1000);
        }

        // إيقاف التقديم التلقائي
        function stopAutoPreview() {
            if (appData.previewInterval) {
                clearInterval(appData.previewInterval);
                appData.previewInterval = null;
            }
        }

        function playSong(song) {
            appData.currentSong = song;
            appData.audio.src = song.url;
            
            // تحديث واجهة المشغل
            document.getElementById('player-title').textContent = song.title;
            document.getElementById('player-artist').textContent = song.artist;
            document.getElementById('player-cover').src = song.cover;
            
            // تحديث زر التشغيل
            document.getElementById('play-icon').classList.remove('fa-play');
            document.getElementById('play-icon').classList.add('fa-pause');
            
            // إضافة الأغنية للقائمة الحالية إذا لم تكن موجودة
            if (!appData.currentQueue.includes(song.id)) {
                appData.currentQueue.push(song.id);
                appData.currentSongIndex = appData.currentQueue.length - 1;
            } else {
                appData.currentSongIndex = appData.currentQueue.indexOf(song.id);
            }
            
            // تشغيل الأغنية
            appData.audio.play().then(() => {
                appData.isPlaying = true;
                updateSongUI();
                updatePlayerUI();
                showNotification(`جاري تشغيل: ${song.title}`);
                
                // إذا كان التقديم التلقائي مفعلاً، ابدأه
                if (appData.autoPreview) {
                    startAutoPreview();
                }
            }).catch(error => {
                console.error('خطأ في التشغيل:', error);
                showNotification('تعذر تشغيل الأغنية');
            });
            
            saveState();
        }

        function playPlaylist(playlist) {
            appData.currentQueue = playlist.songs;
            appData.currentSongIndex = 0;
            
            // إذا كان التشغيل العشوائي مفعلاً، نخلط القائمة
            if (appData.isShuffle) {
                shuffleQueue();
            }
            
            const firstSongId = appData.currentQueue[0];
            const firstSong = appData.songs.find(s => s.id === firstSongId);
            
            if (firstSong) {
                playSong(firstSong);
            }
        }

        function togglePlay() {
            if (!appData.currentSong) {
                if (appData.songs.length > 0) {
                    playRandomSong();
                }
                return;
            }
            
            if (appData.isPlaying) {
                appData.audio.pause();
                document.getElementById('play-icon').classList.remove('fa-pause');
                document.getElementById('play-icon').classList.add('fa-play');
                
                // إيقاف التقديم التلقائي عند التوقف
                if (appData.autoPreview) {
                    stopAutoPreview();
                }
            } else {
                appData.audio.play().then(() => {
                    appData.isPlaying = true;
                    document.getElementById('play-icon').classList.remove('fa-play');
                    document.getElementById('play-icon').classList.add('fa-pause');
                    
                    // إعادة تشغيل التقديم التلقائي إذا كان مفعلاً
                    if (appData.autoPreview) {
                        startAutoPreview();
                    }
                }).catch(error => {
                    console.error('خطأ في التشغيل:', error);
                    showNotification('تعذر تشغيل الأغنية');
                });
            }
            
            appData.isPlaying = !appData.isPlaying;
        }

        function playNext() {
            if (appData.currentQueue.length === 0) return;
            
            if (appData.isShuffle) {
                // في وضع العشوائي، نختار أغنية عشوائية من القائمة
                let nextIndex;
                do {
                    nextIndex = Math.floor(Math.random() * appData.currentQueue.length);
                } while (nextIndex === appData.currentSongIndex && appData.currentQueue.length > 1);
                
                appData.currentSongIndex = nextIndex;
            } else {
                // الوضع العادي
                appData.currentSongIndex = (appData.currentSongIndex + 1) % appData.currentQueue.length;
            }
            
            const nextSongId = appData.currentQueue[appData.currentSongIndex];
            const nextSong = appData.songs.find(s => s.id === nextSongId);
            
            if (nextSong) {
                playSong(nextSong);
            }
        }

        function playPrev() {
            if (appData.currentQueue.length === 0) return;
            
            if (appData.currentPlaybackTime > 3) {
                // إذا مر أكثر من 3 ثوان، إعادة التشغيل من البداية
                appData.audio.currentTime = 0;
            } else {
                if (appData.isShuffle) {
                    // في وضع العشوائي، نعود للأغنية السابقة في التاريخ
                    if (appData.shuffleHistory.length > 1) {
                        // البحث عن الأغنية الحالية في التاريخ
                        const currentIndex = appData.shuffleHistory.indexOf(appData.currentQueue[appData.currentSongIndex]);
                        if (currentIndex > 0) {
                            const prevSongId = appData.shuffleHistory[currentIndex - 1];
                            appData.currentSongIndex = appData.currentQueue.indexOf(prevSongId);
                        }
                    }
                } else {
                    // الوضع العادي
                    appData.currentSongIndex = (appData.currentSongIndex - 1 + appData.currentQueue.length) % appData.currentQueue.length;
                }
                
                const prevSongId = appData.currentQueue[appData.currentSongIndex];
                const prevSong = appData.songs.find(s => s.id === prevSongId);
                
                if (prevSong) {
                    playSong(prevSong);
                }
            }
        }

        function toggleLike(songId) {
            if (appData.likedSongs.has(songId)) {
                appData.likedSongs.delete(songId);
                showNotification('تمت إزالة الأغنية من المفضلة');
            } else {
                appData.likedSongs.add(songId);
                showNotification('تمت إضافة الأغنية إلى المفضلة');
            }
            
            // تحديث الأزرار
            updateSongUI();
            updatePlayerUI();
            saveState();
        }

        function toggleMute() {
            const volumeBtn = document.getElementById('volume-btn');
            const icon = volumeBtn.querySelector('i');
            
            if (appData.volume > 0) {
                appData.lastVolume = appData.volume;
                appData.volume = 0;
                icon.classList.remove('fa-volume-up', 'fa-volume-down');
                icon.classList.add('fa-volume-mute');
            } else {
                appData.volume = appData.lastVolume || 0.7;
                updateVolumeIcon();
            }
            
            appData.audio.volume = appData.volume;
            updateVolumeUI();
            saveState();
        }

        function updateVolumeUI() {
            document.getElementById('volume-level').style.width = `${appData.volume * 100}%`;
            updateVolumeIcon();
        }

        function updateVolumeIcon() {
            const icon = document.getElementById('volume-btn').querySelector('i');
            
            if (appData.volume === 0) {
                icon.classList.remove('fa-volume-up', 'fa-volume-down');
                icon.classList.add('fa-volume-mute');
            } else if (appData.volume < 0.5) {
                icon.classList.remove('fa-volume-up', 'fa-volume-mute');
                icon.classList.add('fa-volume-down');
            } else {
                icon.classList.remove('fa-volume-down', 'fa-volume-mute');
                icon.classList.add('fa-volume-up');
            }
        }

        function updateSongUI() {
            // تحديث جميع قوائم الأغاني
            document.querySelectorAll('.song-item').forEach(item => {
                const songId = parseInt(item.dataset.id);
                
                if (appData.currentSong && songId === appData.currentSong.id) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
                
                // تحديث زر الإعجاب
                const likeBtn = item.querySelector('.like-song-btn i');
                if (likeBtn) {
                    if (appData.likedSongs.has(songId)) {
                        likeBtn.classList.remove('far');
                        likeBtn.classList.add('fas');
                    } else {
                        likeBtn.classList.remove('fas');
                        likeBtn.classList.add('far');
                    }
                }
            });
            
            // تحديث زر الإعجاب في المشغل
            const playerLikeBtn = document.getElementById('like-btn').querySelector('i');
            if (appData.currentSong && appData.likedSongs.has(appData.currentSong.id)) {
                playerLikeBtn.classList.remove('far');
                playerLikeBtn.classList.add('fas');
            } else {
                playerLikeBtn.classList.remove('fas');
                playerLikeBtn.classList.add('far');
            }
        }

        function updatePlayerUI() {
            // تحديث أزرار العشوائي والتكرار
            const shuffleBtn = document.getElementById('shuffle-btn');
            const repeatBtn = document.getElementById('repeat-btn');
            
            if (appData.isShuffle) {
                shuffleBtn.classList.add('active');
            } else {
                shuffleBtn.classList.remove('active');
            }
            
            if (appData.isRepeat) {
                repeatBtn.classList.add('active');
            } else {
                repeatBtn.classList.remove('active');
            }
        }

        function filterSongs(query) {
            if (!query) {
                loadTopSongs();
                loadAllSongs();
                return;
            }
            
            // تصفية الأغاني
            const filteredSongs = appData.songs.filter(song =>
                song.title.toLowerCase().includes(query) ||
                song.artist.toLowerCase().includes(query)
            );
            
            // تحديث قائمة الأغاني
            const allSongsList = document.getElementById('all-songs');
            allSongsList.innerHTML = filteredSongs.map((song, index) => `
                <div class="song-item ${appData.currentSong && appData.currentSong.id === song.id ? 'active' : ''}" data-id="${song.id}">
                    <div class="song-number">${index + 1}</div>
                    <img src="${song.cover}" alt="${song.title}" class="song-cover">
                    <div class="song-details">
                        <div class="song-title">${song.title}</div>
                        <div class="song-artist">${song.artist}</div>
                    </div>
                    <div class="song-duration">${song.duration}</div>
                    <div class="song-actions">
                        <button class="action-btn play-song-btn" data-id="${song.id}">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="action-btn like-song-btn" data-id="${song.id}">
                            <i class="${appData.likedSongs.has(song.id) ? 'fas' : 'far'} fa-heart"></i>
                        </button>
                    </div>
                </div>
            `).join('');
            
            initSongButtons();
        }

        function addNewSong() {
            const title = document.getElementById('song-title').value;
            const artist = document.getElementById('song-artist').value;
            const cover = document.getElementById('song-cover').value || 
                         'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80';
            const genre = document.getElementById('song-genre').value || 'عربي';
            const url = document.getElementById('song-url').value;
            
            if (!title || !artist || !url) {
                showNotification('يرجى ملء جميع الحقول المطلوبة');
                return;
            }
            
            // إنشاء أغنية جديدة
            const newSong = {
                id: Date.now(),
                title,
                artist,
                cover,
                duration: '3:30',
                url,
                playlistId: null
            };
            
            // إضافة الأغنية
            appData.songs.push(newSong);
            
            // حفظ في localStorage
            const userSongs = JSON.parse(localStorage.getItem('userSongs') || '[]');
            userSongs.push(newSong);
            localStorage.setItem('userSongs', JSON.stringify(userSongs));
            
            // إعادة تحميل القوائم
            loadAllSongs();
            
            // إعادة تعيين النموذج
            document.getElementById('song-form').reset();
            
            // إظهار رسالة نجاح
            showNotification(`تمت إضافة "${title}" بنجاح`);
            
            // التبديل إلى تبويب الأغاني
            document.querySelector('.nav-btn[data-tab="songs"]').click();
        }

        function showNotification(message) {
            showToast(message);
        }

        function showToast(message) {
            // إزالة أي إشعارات سابقة
            const existingToast = document.querySelector('.toast');
            if (existingToast) {
                existingToast.remove();
            }
            
            // إنشاء عنصر الإشعار
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerHTML = `
                <i class="fas fa-info-circle"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(toast);
            
            // إزالة الإشعار بعد 3 ثواني
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.parentNode.removeChild(toast);
                }
            }, 3000);
        }

        function formatTime(seconds) {
            if (isNaN(seconds)) return '0:00';
            
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }

        function saveState() {
            const state = {
                volume: appData.volume,
                likedSongs: Array.from(appData.likedSongs),
                currentSong: appData.currentSong ? appData.currentSong.id : null,
                currentPlaybackTime: appData.currentPlaybackTime,
                isPlaying: appData.isPlaying,
                autoPreview: appData.autoPreview,
                previewSeconds: appData.previewSeconds,
                isShuffle: appData.isShuffle,
                isRepeat: appData.isRepeat
            };
            
            localStorage.setItem('musicAppState', JSON.stringify(state));
        }

        function loadState() {
            const savedState = localStorage.getItem('musicAppState');
            
            if (savedState) {
                try {
                    const state = JSON.parse(savedState);
                    
                    if (state.volume !== undefined) {
                        appData.volume = state.volume;
                        appData.audio.volume = appData.volume;
                        updateVolumeUI();
                    }
                    
                    if (state.likedSongs) {
                        appData.likedSongs = new Set(state.likedSongs);
                    }
                    
                    if (state.autoPreview !== undefined) {
                        appData.autoPreview = state.autoPreview;
                        if (appData.autoPreview) {
                            document.getElementById('auto-preview-btn').classList.add('active');
                            document.getElementById('preview-indicator').style.display = 'inline-block';
                        }
                    }
                    
                    if (state.previewSeconds !== undefined) {
                        appData.previewSeconds = state.previewSeconds;
                    }
                    
                    if (state.isShuffle !== undefined) {
                        appData.isShuffle = state.isShuffle;
                    }
                    
                    if (state.isRepeat !== undefined) {
                        appData.isRepeat = state.isRepeat;
                    }
                    
                    if (state.currentSong) {
                        const song = appData.songs.find(s => s.id === state.currentSong);
                        if (song) {
                            appData.currentSong = song;
                            appData.audio.src = song.url;
                            appData.audio.currentTime = state.currentPlaybackTime || 0;
                            
                            document.getElementById('player-title').textContent = song.title;
                            document.getElementById('player-artist').textContent = song.artist;
                            document.getElementById('player-cover').src = song.cover;
                            
                            if (state.isPlaying) {
                                appData.audio.play().catch(console.error);
                                document.getElementById('play-icon').classList.remove('fa-play');
                                document.getElementById('play-icon').classList.add('fa-pause');
                                appData.isPlaying = true;
                                
                                // إذا كان التقديم التلقائي مفعلاً، ابدأه
                                if (appData.autoPreview) {
                                    startAutoPreview();
                                }
                            }
                        }
                    }
                    
                    updateSongUI();
                    updatePlayerUI();
                    
                } catch (error) {
                    console.error('خطأ في تحميل الحالة:', error);
                }
            }
        }

        // إضافة وظيفة للبحث
        function searchSongs(query) {
            return appData.songs.filter(song => 
                song.title.toLowerCase().includes(query.toLowerCase()) ||
                song.artist.toLowerCase().includes(query.toLowerCase())
            );
        }
    </script>
</body>

</html>
